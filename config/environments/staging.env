# Staging environment defaults
ENV=staging
DEBUG=false
PYTHONPATH=src/backend
DATABASE_URL=postgresql+psycopg://ltsr_user:ltsr_password@db:5432/ltsr_staging
TEST_DATABASE_URL=postgresql+psycopg://ltsr_user:ltsr_password@db:5432/ltsr_staging_test
REDIS_URL=redis://redis:6379/1
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/1
FRONTEND_URL=https://staging.socializer.app
BACKEND_PORT=8000
FLOWER_PORT=5555
LOG_LEVEL=INFO

# Instagram ingestion
APIFY_TOKEN={{ secrets.APIFY_TOKEN | default("") }}

# Sentiment analysis pipeline
PRIMARY_MODEL=cardiffnlp/twitter-roberta-base-topic-sentiment-latest
FALLBACK_SERVICE="Azure Text Analytics Opinion Mining"
CONFIDENCE_THRESHOLD=0.75
SENTIMENT_MIN_CONF=0.55
SENTIMENT_MIN_MARGIN=0.10
FALLBACK_ENABLED=true
THREAD_ARCHIVE_IDLE_MINUTES=180
AZURE_TEXT_ANALYTICS_ENDPOINT={{ secrets.AZURE_TEXT_ANALYTICS_ENDPOINT }}
AZURE_TEXT_ANALYTICS_KEY={{ secrets.AZURE_TEXT_ANALYTICS_KEY }}
# Legacy inference service (left for backwards compatibility)
ML_INFERENCE_URL=https://ml.staging.socializer.app/predict
HF_HOME=.hf_cache
HF_TOKEN={{ secrets.HF_TOKEN | default("") }}
HUGGINGFACE_HUB_TOKEN={{ secrets.HF_TOKEN | default("") }}

APP_HOST=staging.socializer.app
API_HOST=api.staging.socializer.app
FLOWER_HOST=flower.staging.socializer.app
ML_HOST=ml.staging.socializer.app

# Auth0 (replace placeholders with secrets stored in the shared vault)
AUTH0_DOMAIN=staging-socializer.us.auth0.com
AUTH0_AUDIENCE=https://api.staging.socializer.app/
AUTH0_CLIENT_ID=REPLACE_WITH_STAGING_AUTH0_CLIENT_ID
AUTH0_CLIENT_SECRET=REPLACE_WITH_STAGING_AUTH0_CLIENT_SECRET
AUTH0_ALGORITHMS=RS256

# Frontend Auth0 settings mirrored for Vite build
VITE_API_URL=https://api.staging.socializer.app
VITE_WS_URL=wss://api.staging.socializer.app/ws
VITE_AUTH0_DOMAIN=staging-socializer.us.auth0.com
VITE_AUTH0_CLIENT_ID=REPLACE_WITH_STAGING_AUTH0_CLIENT_ID
VITE_AUTH0_AUDIENCE=https://api.staging.socializer.app/
